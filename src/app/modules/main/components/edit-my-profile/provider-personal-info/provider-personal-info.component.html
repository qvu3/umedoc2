<div class="row">
    <div class="col-md-12">
        <form name="form" class="form-horizontal"
            (ngSubmit)="(!f.form.valid && scrollToErrorField(f))  || (f.form.valid && save())" #f="ngForm" novalidate>
            <fieldset class="fieldset-user">
                <div class="form-group row clearfix">
                    <div class="col-md-12">
                        <app-crop-image-view [typeUpload]="'user'" [link]="'/api/Utility/S3UploadImage'"
                            [ModelID]="model.ID" name="ProfilePicture" [(ngModel)]="model.ProviderUser.ProfilePicture"
                            #ProfilePicture="ngModel" [autoSave]="true" [userId]="model.ProviderUser.Id">
                        </app-crop-image-view>
                    </div>
                </div>
                <div class="form-group row clearfix text-center"
                    *ngIf="currentUser && (currentUser.Role == 'Company_Admin' || currentUser.Role == 'Special_Admin') && isStaff">
                    <div class="col-md-12 text-center">
                        <label>Role<span class="danger">*</span></label>
                        <div class="col-md-4" style="left: 33%;">
                            <select class="form-control" name="Role" [(ngModel)]="model.ProviderUser.Role"
                                #Role="ngModel" required>
                                <option value="" disabled>Select Role</option>
                                <option value="Company_Admin">Company Admin</option>
                                <option value="Provider">Provider</option>
                            </select>
                            <div *ngIf="f.submitted && Role.errors && Role.errors.required"
                                class="row error-message col-md-12">
                                Required.
                            </div>
                        </div>
                    </div>
                </div>
                <h4 class="form-section" *ngIf="model.ProviderUser"><i
                        class="font-medium-5 icon-line-height la la-user"></i> Personal Info</h4>
                <div class="form-group row clearfix">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Email (not shown to public):
                                <span class="danger">
                                    *
                                </span>
                            </label>
                            <!-- <input readonly="readonly" class="form-control required" placeholder="Email" name="Email"
                                [(ngModel)]="model.ProviderUser.Email" #Email="ngModel" required type="text" /> -->

                            <input class="form-control required" type="text" name="Email"
                                pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" #Email="ngModel"
                                [(ngModel)]="model.ProviderUser.Email" required>

                            <div *ngIf="Email.errors && Email.errors.required" class="error-message">Required
                            </div>
                            <div *ngIf="Email.errors && !Email.errors.required && Email.errors.pattern"
                                class="error-message">Invalid value
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Mobile phone to receive SMS Alerts (not shown to public):
                                <span class="danger">
                                    *
                                </span>
                            </label>
                            <input class="form-control required" [textMask]="{mask:maskPhone}"
                                pattern="^\(([2346789][0-9]{2}|[23456789][012346789][0-9]|[23456789][0-9][012346789])\)\s?([012346789][0-9]{2}|[0123456789][012346789][0-9]|[0123456789][0-9][012346789])-[0-9]{4}$"
                                placeholder="CellPhone" name="Phone Number" [(ngModel)]="model.ProviderUser.CellPhone"
                                #CellPhone="ngModel" required type="text" />
                            <div *ngIf="f.submitted && CellPhone.errors && !CellPhone.errors.required && CellPhone.errors.pattern"
                                class="error-message">Invalid value
                            </div>
                            <div *ngIf="f.submitted && CellPhone.errors && CellPhone.errors.required"
                                class="error-message">Required
                            </div>
                        </div>
                    </div>

                </div>
                <div class="form-group row clearfix" [ngClass]="{ 'has-error': !FirstName.valid }">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Prefix:
                            </label>
                            <select class="form-control" name="Prefix" #Prefix="ngModel"
                                [(ngModel)]="model.ProviderUser.Prefix">
                                <option value="">None</option>
                                <option *ngFor="let item of prefixes" [value]="item">{{item}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                First Name:
                                <span class="danger">
                                    *
                                </span>
                            </label>
                            <input type="text" class="form-control" placeholder="First Name" name="FirstName"
                                [(ngModel)]="model.ProviderUser.FirstName" #FirstName="ngModel" required
                                maxlength="35" />
                            <div *ngIf="f.submitted && FirstName.errors && FirstName.errors.required"
                                class="error-message">Required
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Middle Name:
                            </label>
                            <input type="text" class="form-control" placeholder="Middle Name" name="MiddleName"
                                [(ngModel)]="model.ProviderUser.MiddleName" #MiddleName="ngModel" maxlength="35" />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Last Name:
                                <span class="danger">
                                    *
                                </span>
                            </label>
                            <input type="text" class="form-control" name="LastName"
                                [(ngModel)]="model.ProviderUser.LastName" placeholder="Last Name" #LastName="ngModel"
                                required />
                            <div *ngIf="f.submitted && LastName.errors && LastName.errors.required"
                                class="error-message">
                                Required
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Suffix:
                            </label>
                            <select class="form-control" name="Suffix" #Suffix="ngModel"
                                [(ngModel)]="model.ProviderUser.Suffix">
                                <option value="">None</option>
                                <option *ngFor="let item of suffixes" [value]="item">{{item}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group row clearfix" [ngClass]="{ 'has-error': !DOB.valid }">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Date of Birth (not shown to public):
                                <span class="danger">
                                    *
                                </span>
                            </label>
                            <app-date-time-picker [placeholder]="'Date of Birth'" [hasTime]="false" name="DOB"
                                [(ngModel)]="model.ProviderUser.DOB" #DOB="ngModel" required>
                            </app-date-time-picker>
                            <div *ngIf="f.submitted && DOB.errors && DOB.errors.required" class="error-message">
                                Required</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="lastName">
                                Gender:
                                <span class="danger">
                                    *
                                </span>
                            </label>
                            <select class="form-control" name="Gender" [(ngModel)]="model.ProviderUser.Gender"
                                #Gender="ngModel" required>
                                <option value="" disabled>Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                            <div *ngIf="f.submitted && Gender.errors && Gender.errors.required"
                                class="row error-message col-md-12">
                                Required.
                            </div>
                        </div>
                    </div>
                </div>


            </fieldset>

            <div class="col-md-12 form-actions text-center">
                <button type="button" (click)="cancel()" class="btn btn-medical-white btn-min-width btn-lg mr-1">
                    <i class="ft-x"></i>Cancel</button>
                <button type="submit" class="btn btn-green btn-min-width btn-lg" [disabled]="Submitting">
                    <i class="la la-check-square-o"></i> Save</button>
            </div>
        </form>
    </div>
</div>